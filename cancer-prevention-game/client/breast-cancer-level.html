<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nivel 1: Detective de Salud - C√°ncer de Mama | VitaGuard Heroes</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/levels/breast-cancer-level.css">
    <link rel="stylesheet" href="css/animations.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="game-level">
    <!-- HUD del Juego -->
    <div id="game-hud" class="game-hud">
        <div class="hud-left">
            <div class="level-info">
                <h3><i class="fas fa-ribbon"></i> Nivel 1: Detective de Salud</h3>
                <p>Misi√≥n: C√°ncer de Mama</p>
            </div>
        </div>
        
        <div class="hud-center">
            <div class="health-bar">
                <span>Vidas</span>
                <div class="hearts">
                    <i class="fas fa-heart" id="heart1"></i>
                    <i class="fas fa-heart" id="heart2"></i>
                    <i class="fas fa-heart" id="heart3"></i>
                </div>
            </div>
        </div>
        
        <div class="hud-right">
            <div class="score-display">
                <span>Puntuaci√≥n</span>
                <div class="score" id="current-score">0</div>
            </div>
            <div class="timer">
                <i class="fas fa-clock"></i>
                <span id="game-timer">05:00</span>
            </div>
        </div>
    </div>

    <!-- Contenedor Principal del Juego -->
    <div id="game-container" class="game-container">
        
        <!-- Pantalla de Introducci√≥n -->
        <div id="intro-screen" class="game-screen active">
            <div class="intro-content">
                <div class="mission-briefing">
                    <div class="briefing-header">
                        <div class="doctor-avatar">
                            <i class="fas fa-user-md"></i>
                        </div>
                        <h2>Dra. Victoria Prevenci√≥n</h2>
                        <p class="doctor-title">Especialista en Detecci√≥n Temprana</p>
                    </div>
                    
                    <div class="briefing-text">
                        <h3>üéØ Misi√≥n: Detective de Salud</h3>
                        <p><strong>H√©roe,</strong> necesitamos tu ayuda. Como detective de salud, tu misi√≥n es aprender las t√©cnicas de autoexploraci√≥n mamaria y detectar anomal√≠as importantes.</p>
                        
                        <div class="mission-objectives">
                            <h4>üìã Objetivos de la Misi√≥n:</h4>
                            <ul>
                                <li>üîç Aprender la t√©cnica correcta de autoexploraci√≥n</li>
                                <li>üéØ Identificar zonas de examen importantes</li>
                                <li>‚ö†Ô∏è Reconocer signos de alerta</li>
                                <li>üìÖ Entender la frecuencia recomendada</li>
                                <li>üèÜ Convertirte en un experto en prevenci√≥n</li>
                            </ul>
                        </div>
                        
                        <div class="difficulty-info">
                            <span class="difficulty-badge basic">Nivel: B√°sico</span>
                            <span class="time-estimate">‚è±Ô∏è Tiempo estimado: 5-7 minutos</span>
                        </div>
                    </div>
                    
                    <div class="briefing-actions">
                        <button class="btn-start-mission" onclick="breastCancerGame.startMission()">
                            <i class="fas fa-play"></i>
                            Comenzar Misi√≥n
                        </button>
                        <button class="btn-back" onclick="breastCancerGame.goBack()">
                            <i class="fas fa-arrow-left"></i>
                            Volver al Men√∫
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Fase 1: Tutorial de Autoexploraci√≥n -->
        <div id="tutorial-screen" class="game-screen">
            <div class="tutorial-content">
                <div class="tutorial-header">
                    <h2>üìö Gu√≠a para Autoexploraci√≥n Mamaria</h2>
                    <div class="progress-bar">
                        <div class="progress-fill" id="tutorial-progress"></div>
                    </div>
                    <span class="step-counter">Paso <span id="current-step">1</span> de <span id="total-steps">5</span></span>
                </div>
                
                <div class="tutorial-main">
                    <div class="tutorial-visual">
                        <div class="anatomy-diagram" id="anatomy-diagram">
                            <!-- Aqu√≠ se mostrar√° el diagrama interactivo -->
                        </div>
                    </div>
                    
                    <div class="tutorial-instructions">
                        <div class="instruction-card" id="instruction-card">
                            <!-- Las instrucciones se cargar√°n din√°micamente -->
                        </div>
                        
                        <div class="tutorial-controls">
                            <button class="btn-prev" id="btn-prev" onclick="breastCancerGame.previousStep()" disabled>
                                <i class="fas fa-chevron-left"></i>
                                Anterior
                            </button>
                            <button class="btn-next" id="btn-next" onclick="breastCancerGame.nextStep()">
                                Siguiente
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Fase 2: Juego de Detecci√≥n -->
        <div id="detection-game-screen" class="game-screen">
            <div class="detection-content">
                <div class="game-header">
                    <h2>üîç Pr√°ctica de Detecci√≥n</h2>
                    <p>Encuentra las anomal√≠as haciendo clic en las √°reas sospechosas</p>
                </div>
                
                <div class="detection-area">
                    <div class="examination-model" id="examination-model">
                        <!-- Contexto corporal sutil -->
                        <div class="body-context"></div>
                        
                        <!-- √Årea de la axila (parte del examen) -->
                        <div class="axilla-area"></div>
                        
                        <!-- Elementos anat√≥micos del seno -->
                        <div class="anatomy-overlay"></div>
                        <div class="quadrant-lines"></div>
                        
                        <!-- Zonas de detecci√≥n interactivas -->
                        <div class="detection-zones">
                            <!-- Las zonas se generar√°n din√°micamente -->
                        </div>
                        
                        <!-- Mano de exploraci√≥n -->
                        <div class="scanning-hand" id="scanning-hand">
                            <i class="fas fa-hand-paper"></i>
                        </div>
                    </div>
                    
                    <div class="detection-feedback" id="detection-feedback">
                        <!-- Feedback en tiempo real -->
                    </div>
                </div>
                
                <div class="detection-sidebar">
                    <div class="findings-panel">
                        <h3>üìã Hallazgos</h3>
                        <div class="findings-list" id="findings-list">
                            <!-- Lista de hallazgos -->
                        </div>
                    </div>
                    
                    <div class="hints-panel">
                        <h3>üí° Pistas</h3>
                        <div class="hint-display" id="hint-display">
                            <p>Examina sistem√°ticamente cada cuadrante...</p>
                        </div>
                        <button class="btn-hint" onclick="breastCancerGame.showHint()">
                            <i class="fas fa-lightbulb"></i>
                            Pista
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Fase 3: Quiz Interactivo -->
        <div id="quiz-screen" class="game-screen">
            <div class="quiz-content">
                <div class="quiz-header">
                    <h2>üß† Evaluaci√≥n de Conocimientos</h2>
                    <div class="quiz-progress">
                        <span>Pregunta <span id="question-number">1</span> de <span id="total-questions">5</span></span>
                        <div class="quiz-progress-bar">
                            <div class="quiz-progress-fill" id="quiz-progress"></div>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-main">
                    <div class="question-card" id="question-card">
                        <!-- Las preguntas se cargar√°n din√°micamente -->
                    </div>
                    
                    <div class="answer-options" id="answer-options">
                        <!-- Las opciones se cargar√°n din√°micamente -->
                    </div>
                    
                    <div class="quiz-feedback" id="quiz-feedback">
                        <!-- Feedback de las respuestas -->
                    </div>
                </div>
                
                <div class="quiz-controls">
                    <button class="btn-submit-answer" id="btn-submit" onclick="breastCancerGame.submitAnswer()" disabled>
                        <i class="fas fa-check"></i>
                        Confirmar Respuesta
                    </button>
                </div>
            </div>
        </div>

        <!-- Pantalla de Resultados -->
        <div id="results-screen" class="game-screen">
            <div class="results-content">
                <div class="results-header">
                    <div class="completion-badge" id="completion-badge">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <h2 id="results-title">¬°Misi√≥n Completada!</h2>
                    <p id="results-subtitle">Has dominado la autoexploraci√≥n mamaria</p>
                </div>
                
                <div class="results-stats">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-label">Puntuaci√≥n Final</span>
                            <span class="stat-value" id="final-score">0</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-label">Precisi√≥n</span>
                            <span class="stat-value" id="accuracy-score">0%</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-label">Tiempo</span>
                            <span class="stat-value" id="completion-time">00:00</span>
                        </div>
                    </div>
                </div>
                
                <div class="results-achievements">
                    <h3>üèÜ Logros Obtenidos</h3>
                    <div class="achievements-grid" id="achievements-earned">
                        <!-- Los logros se mostrar√°n din√°micamente -->
                    </div>
                </div>
                
                <div class="results-knowledge">
                    <h3>üìö Conocimientos Adquiridos</h3>
                    <div class="knowledge-checklist">
                        <div class="knowledge-item completed">
                            <i class="fas fa-check"></i>
                            <span>T√©cnica correcta de autoexploraci√≥n</span>
                        </div>
                        <div class="knowledge-item completed">
                            <i class="fas fa-check"></i>
                            <span>Identificaci√≥n de zonas importantes</span>
                        </div>
                        <div class="knowledge-item completed">
                            <i class="fas fa-check"></i>
                            <span>Reconocimiento de signos de alerta</span>
                        </div>
                        <div class="knowledge-item completed">
                            <i class="fas fa-check"></i>
                            <span>Frecuencia recomendada de examen</span>
                        </div>
                    </div>
                </div>
                
                <div class="results-actions">
                    <button class="btn-continue" onclick="breastCancerGame.continueToNextLevel()">
                        <i class="fas fa-arrow-right"></i>
                        Siguiente Nivel
                    </button>
                    <button class="btn-replay" onclick="breastCancerGame.replayLevel()">
                        <i class="fas fa-redo"></i>
                        Repetir Nivel
                    </button>
                    <button class="btn-menu" onclick="breastCancerGame.goToMenu()">
                        <i class="fas fa-home"></i>
                        Men√∫ Principal
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlays y Modales -->
    <div id="pause-overlay" class="game-overlay hidden">
        <div class="overlay-content">
            <h2>‚è∏Ô∏è Juego Pausado</h2>
            <div class="pause-actions">
                <button class="btn-resume" onclick="breastCancerGame.resumeGame()">
                    <i class="fas fa-play"></i>
                    Continuar
                </button>
                <button class="btn-restart" onclick="breastCancerGame.restartLevel()">
                    <i class="fas fa-redo"></i>
                    Reiniciar
                </button>
                <button class="btn-exit" onclick="breastCancerGame.exitLevel()">
                    <i class="fas fa-door-open"></i>
                    Salir
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/auth.js"></script>
    <script src="js/animations.js"></script>
    <script src="js/levels/breast-cancer-data.js"></script>
    <script src="js/levels/breast-cancer-game.js"></script>
    <script>
        // Inicializar autenticaci√≥n y el juego cuando la p√°gina cargue
        document.addEventListener('DOMContentLoaded', () => {
            // Inicializar cliente de autenticaci√≥n
            if (typeof AuthClient !== 'undefined') {
                window.authClient = new AuthClient();
                console.log('üîê AuthClient inicializado correctamente');
            } else {
                console.error('‚ùå AuthClient no est√° disponible');
            }
            
            // Inicializar el juego
            window.breastCancerGame = new BreastCancerGame();
        });
        
        // Eventos de teclado para el juego
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'Escape':
                    if (window.breastCancerGame) {
                        window.breastCancerGame.togglePause();
                    }
                    break;
                case ' ':
                    e.preventDefault();
                    if (window.breastCancerGame && window.breastCancerGame.currentPhase === 'detection') {
                        window.breastCancerGame.activateScanning();
                    }
                    break;
            }
        });
    </script>

    <script>
        // Test de carga de p√°gina
        console.log('üéÆ breast-cancer-level.html cargado exitosamente');
        console.log('üìç URL actual:', window.location.href);
        console.log('üîê authClient disponible:', typeof window.authClient);
        
        // Verificar cuando la p√°gina est√© completamente cargada
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ DOM cargado completamente en breast-cancer-level.html');
        });
    </script>
</body>
</html>