<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nivel 4: Centro de Prevenci√≥n del Colon - VitaGuard Heroes</title>
    <link rel="stylesheet" href="css/levels/colon-cancer-level.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Pantalla de Carga -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="dna-spiral">
                <div class="helix-strand"></div>
                <div class="helix-strand"></div>
                <div class="helix-strand"></div>
            </div>
            <h2>üî¨ Cargando Centro de Prevenci√≥n del Colon...</h2>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p class="loading-text">Preparando equipamiento m√©dico avanzado...</p>
        </div>
    </div>

    <!-- Header del Nivel -->
    <header class="level-header">
        <div class="header-left">
            <button id="pause-btn" class="header-btn">
                <i class="fas fa-pause"></i>
            </button>
            <div class="level-info">
                <h1>üè• Nivel 4: Centro de Prevenci√≥n del Colon</h1>
                <p class="mission-text">El Nivel Final - Prevenci√≥n del C√°ncer Colorrectal</p>
            </div>
        </div>
        <div class="header-right">
            <div class="stat-card">
                <i class="fas fa-trophy"></i>
                <div class="stat-content">
                    <span class="stat-label">Puntos</span>
                    <span id="current-score" class="stat-value">0</span>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-clock"></i>
                <div class="stat-content">
                    <span class="stat-label">Tiempo</span>
                    <span id="timer" class="stat-value">8:00</span>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-heart"></i>
                <div class="stat-content">
                    <span class="stat-label">Vidas</span>
                    <div id="lives-container" class="lives">
                        <i class="fas fa-heart heart" id="heart1"></i>
                        <i class="fas fa-heart heart" id="heart2"></i>
                        <i class="fas fa-heart heart" id="heart3"></i>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Contenedor Principal -->
    <main class="game-container">

        <!-- FASE 1: Introducci√≥n -->
        <section id="intro-phase" class="game-phase active">
            <div class="intro-content">
                <div class="intro-hero">
                    <div class="colon-animation">
                        <div class="colon-organ"></div>
                        <div class="health-particles"></div>
                    </div>
                    <h2>üè• Bienvenido al Centro de Prevenci√≥n del Colon</h2>
                    <p class="intro-subtitle">El nivel m√°s avanzado - Domina la prevenci√≥n del c√°ncer colorrectal</p>
                </div>
                <div class="intro-features">
                    <div class="feature-card">
                        <div class="feature-icon">üéØ</div>
                        <h3>7 Fases Interactivas</h3>
                        <p>El nivel m√°s completo del juego</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üî¨</div>
                        <h3>Colonoscop√≠a Virtual</h3>
                        <p>Navega en 3D el sistema digestivo</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üçé</div>
                        <h3>Nutrici√≥n Preventiva</h3>
                        <p>Aprende la dieta ideal para prevenir</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">‚öïÔ∏è</div>
                        <h3>Detecci√≥n Temprana</h3>
                        <p>Identifica p√≥lipos y s√≠ntomas</p>
                    </div>
                </div>
                <button id="start-game" class="primary-btn pulse-btn">
                    <i class="fas fa-play"></i> Comenzar Nivel Final
                </button>
            </div>
        </section>

        <!-- FASE 2: Factores de Riesgo -->
        <section id="risk-factors-phase" class="game-phase">
            <div class="phase-header">
                <h2>‚öñÔ∏è Factores de Riesgo vs Protecci√≥n</h2>
                <p>Clasifica los factores seg√∫n su impacto en el c√°ncer de colon</p>
                <div class="progress-badge">
                    <span id="risk-progress">0/12</span>
                </div>
            </div>
            <div class="risk-container">
                <div class="risk-zones">
                    <div class="risk-zone protection-zone" id="protection-zone">
                        <div class="zone-header">
                            <i class="fas fa-shield-alt"></i>
                            <h3>Protecci√≥n</h3>
                        </div>
                        <div class="zone-content" data-zone="protection"></div>
                    </div>
                    <div class="risk-zone items-pool" id="items-pool">
                        <div class="zone-header">
                            <i class="fas fa-boxes"></i>
                            <h3>Arrastra a la zona correcta</h3>
                        </div>
                        <div class="zone-content" id="risk-items"></div>
                    </div>
                    <div class="risk-zone danger-zone" id="danger-zone">
                        <div class="zone-header">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h3>Riesgo</h3>
                        </div>
                        <div class="zone-content" data-zone="danger"></div>
                    </div>
                </div>
                
                <!-- Bot√≥n flotante - OCULTO hasta completar 12/12 -->
                <div id="floating-continue" style="position: fixed; bottom: 30px; right: 30px; z-index: 99999; display: none; opacity: 1;">
                    <button id="continue-to-colonoscopy" style="background: linear-gradient(135deg, #4caf50, #66bb6a); color: white; padding: 20px 35px; border: none; border-radius: 12px; cursor: pointer; font-size: 18px; font-weight: bold; box-shadow: 0 8px 30px rgba(76,175,80,0.6); transition: all 0.3s;">
                        <span style="font-size: 20px;">ÔøΩ</span> CONTINUAR A COLONOSCOP√çA <span style="font-size: 20px;">‚Üí</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- FASE 3: Colonoscop√≠a Virtual -->
        <section id="colonoscopy-phase" class="game-phase">
            <div class="phase-header">
                <h2>üî¨ Colonoscop√≠a Virtual Interactiva</h2>
                <p>Navega por el colon y examina diferentes secciones</p>
                <div class="progress-badge">
                    <span id="colonoscopy-progress">0/5</span>
                </div>
            </div>
            <div class="colonoscopy-container">
                <div class="colon-view-3d" id="colon-view">
                    <canvas id="colon-canvas"></canvas>
                    <div class="navigation-controls">
                        <button class="nav-btn" id="nav-up"><i class="fas fa-arrow-up"></i></button>
                        <button class="nav-btn" id="nav-left"><i class="fas fa-arrow-left"></i></button>
                        <button class="nav-btn" id="nav-forward"><i class="fas fa-arrow-circle-up"></i> Avanzar</button>
                        <button class="nav-btn" id="nav-right"><i class="fas fa-arrow-right"></i></button>
                        <button class="nav-btn" id="nav-down"><i class="fas fa-arrow-down"></i></button>
                    </div>
                    <div class="section-info" id="section-info">
                        <h3>Secci√≥n: <span id="current-section">Inicio del Colon</span></h3>
                        <p id="section-description">Navegando por el intestino grueso...</p>
                    </div>
                </div>
                <div class="examination-panel">
                    <h3>Panel de Examinaci√≥n</h3>
                    <div class="zoom-controls">
                        <button class="zoom-btn" id="zoom-in"><i class="fas fa-search-plus"></i> Acercar</button>
                        <button class="zoom-btn" id="zoom-out"><i class="fas fa-search-minus"></i> Alejar</button>
                    </div>
                    <div class="findings-list" id="findings-list">
                        <h4>Hallazgos Registrados:</h4>
                        <ul id="findings-items"></ul>
                    </div>
                    <button id="examine-section" class="primary-btn">
                        <i class="fas fa-microscope"></i> Examinar Secci√≥n
                    </button>
                </div>
            </div>
        </section>

        <!-- FASE 4: Detector de P√≥lipos -->
        <section id="polyps-phase" class="game-phase">
            <div class="phase-header">
                <h2>üîç Detector de P√≥lipos</h2>
                <p>Identifica y clasifica los p√≥lipos encontrados</p>
                <div class="progress-badge">
                    <span id="polyps-progress">0/8</span>
                </div>
            </div>
            <div class="polyps-container">
                <div class="polyp-viewer">
                    <div class="viewer-screen" id="polyp-screen">
                        <canvas id="polyp-canvas"></canvas>
                    </div>
                    <div class="viewer-controls">
                        <button class="control-btn" id="rotate-left"><i class="fas fa-undo"></i></button>
                        <button class="control-btn" id="rotate-right"><i class="fas fa-redo"></i></button>
                        <button class="control-btn" id="polyp-zoom-in"><i class="fas fa-plus"></i></button>
                        <button class="control-btn" id="polyp-zoom-out"><i class="fas fa-minus"></i></button>
                    </div>
                </div>
                <div class="polyp-classification">
                    <h3>Clasificaci√≥n del P√≥lipo</h3>
                    <div class="polyp-info" id="polyp-info"></div>
                    <div class="classification-buttons">
                        <button class="classify-btn benign-btn" data-type="benign">
                            <i class="fas fa-check-circle"></i> Benigno
                        </button>
                        <button class="classify-btn precancerous-btn" data-type="precancerous">
                            <i class="fas fa-exclamation-circle"></i> Precanceroso
                        </button>
                        <button class="classify-btn malignant-btn" data-type="malignant">
                            <i class="fas fa-times-circle"></i> Maligno
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- FASE 5: Dieta Saludable -->
        <section id="diet-phase" class="game-phase">
            <div class="phase-header">
                <h2>üçé Nutrici√≥n para la Prevenci√≥n</h2>
                <p>Crea el plato perfecto para prevenir el c√°ncer de colon</p>
                <div class="progress-badge">
                    <span id="diet-progress">0/15</span>
                </div>
            </div>
            <div class="diet-container">
                <div class="plate-builder">
                    <div class="plate" id="healthy-plate">
                        <div class="plate-section vegetables" data-category="vegetables">
                            <span class="section-label">Vegetales</span>
                        </div>
                        <div class="plate-section proteins" data-category="proteins">
                            <span class="section-label">Prote√≠nas</span>
                        </div>
                        <div class="plate-section grains" data-category="grains">
                            <span class="section-label">Granos</span>
                        </div>
                        <div class="plate-section fruits" data-category="fruits">
                            <span class="section-label">Frutas</span>
                        </div>
                    </div>
                    <div class="plate-score">
                        <h3>Puntuaci√≥n del Plato</h3>
                        <div class="score-bar">
                            <div class="score-fill" id="plate-score-fill"></div>
                        </div>
                        <p id="plate-score-text">0/100</p>
                    </div>
                </div>
                <div class="food-items-container">
                    <h3>Alimentos Disponibles</h3>
                    <div class="food-categories">
                        <button class="category-tab active" data-category="all">Todos</button>
                        <button class="category-tab" data-category="vegetables">Vegetales</button>
                        <button class="category-tab" data-category="proteins">Prote√≠nas</button>
                        <button class="category-tab" data-category="grains">Granos</button>
                        <button class="category-tab" data-category="fruits">Frutas</button>
                    </div>
                    <div class="food-items" id="food-items"></div>
                </div>
            </div>
            <button id="verify-plate" class="primary-btn">
                <i class="fas fa-check"></i> Verificar Plato
            </button>
        </section>

        <!-- FASE 6: S√≠ntomas Checker -->
        <section id="symptoms-phase" class="game-phase">
            <div class="phase-header">
                <h2>‚ö†Ô∏è Identificador de S√≠ntomas</h2>
                <p>Reconoce las se√±ales de alarma del c√°ncer de colon</p>
                <div class="progress-badge">
                    <span id="symptoms-progress">0/10</span>
                </div>
            </div>
            <div class="symptoms-container">
                <div class="patient-cases" id="patient-cases">
                    <div class="case-card" id="current-case">
                        <div class="case-header">
                            <h3>Caso Cl√≠nico <span id="case-number">1</span></h3>
                            <div class="urgency-meter" id="urgency-meter"></div>
                        </div>
                        <div class="case-content">
                            <div class="patient-info" id="patient-info"></div>
                            <div class="symptoms-list" id="symptoms-list"></div>
                        </div>
                        <div class="case-actions">
                            <button class="action-btn urgent-btn" data-action="urgent">
                                <i class="fas fa-ambulance"></i> Urgente
                            </button>
                            <button class="action-btn screening-btn" data-action="screening">
                                <i class="fas fa-calendar-check"></i> Screening
                            </button>
                            <button class="action-btn monitoring-btn" data-action="monitoring">
                                <i class="fas fa-eye"></i> Monitoreo
                            </button>
                            <button class="action-btn normal-btn" data-action="normal">
                                <i class="fas fa-check"></i> Normal
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FASE 7: Calendario de Screening -->
        <section id="screening-phase" class="game-phase">
            <div class="phase-header">
                <h2>üìÖ Calendario de Screening Personalizado</h2>
                <p>Programa las colonoscop√≠as seg√∫n edad y factores de riesgo</p>
            </div>
            <div class="screening-container">
                <div class="patient-profile">
                    <h3>Perfil del Paciente</h3>
                    <div id="screening-patient-info"></div>
                </div>
                <div class="screening-options">
                    <div class="option-group">
                        <label>Primera colonoscop√≠a:</label>
                        <select id="first-screening">
                            <option value="">Seleccionar...</option>
                            <option value="ahora">Ahora (inmediato)</option>
                            <option value="45">A los 45 a√±os</option>
                            <option value="50">A los 50 a√±os</option>
                            <option value="no-necesario">No necesario a√∫n</option>
                        </select>
                    </div>
                    <div class="option-group">
                        <label>Frecuencia de seguimiento:</label>
                        <select id="screening-frequency">
                            <option value="">Seleccionar...</option>
                            <option value="1-a√±o">Cada a√±o</option>
                            <option value="3-a√±os">Cada 3 a√±os</option>
                            <option value="5-a√±os">Cada 5 a√±os</option>
                            <option value="10-a√±os">Cada 10 a√±os</option>
                        </select>
                    </div>
                    <div class="option-group">
                        <label>Pruebas adicionales:</label>
                        <select id="additional-tests">
                            <option value="">Seleccionar...</option>
                            <option value="sangre-oculta">Test de sangre oculta anual</option>
                            <option value="sigmoidoscopia">Sigmoidoscopia cada 5 a√±os</option>
                            <option value="colonoscopia-virtual">Colonoscop√≠a virtual</option>
                            <option value="ninguna">Ninguna adicional</option>
                        </select>
                    </div>
                    <div class="option-group">
                        <label>Seguimiento especial:</label>
                        <select id="special-monitoring">
                            <option value="">Seleccionar...</option>
                            <option value="alto-riesgo">Alto riesgo (anual)</option>
                            <option value="historial-familiar">Con historial familiar</option>
                            <option value="polipos-previos">P√≥lipos previos</option>
                            <option value="estandar">Seguimiento est√°ndar</option>
                        </select>
                    </div>
                </div>
                <button id="verify-screening" class="primary-btn">
                    <i class="fas fa-check-circle"></i> Verificar Plan
                </button>
            </div>
        </section>

        <!-- Pantalla de Victoria -->
        <section id="victory-screen" class="game-phase victory-screen">
            <div class="victory-content">
                <div class="trophy-animation">
                    <i class="fas fa-trophy"></i>
                    <div class="confetti"></div>
                </div>
                <h2 class="victory-title">¬°Centro Completado!</h2>
                <p class="victory-subtitle">Has dominado el nivel m√°s complejo del juego</p>
                <div class="final-stats">
                    <div class="stat-box">
                        <i class="fas fa-star"></i>
                        <span class="stat-number" id="final-score">0</span>
                        <span class="stat-label">Puntos Totales</span>
                    </div>
                    <div class="stat-box">
                        <i class="fas fa-clock"></i>
                        <span class="stat-number" id="final-time">0:00</span>
                        <span class="stat-label">Tiempo</span>
                    </div>
                    <div class="stat-box">
                        <i class="fas fa-bullseye"></i>
                        <span class="stat-number" id="final-accuracy">0%</span>
                        <span class="stat-label">Precisi√≥n</span>
                    </div>
                    <div class="stat-box">
                        <i class="fas fa-award"></i>
                        <span class="stat-number" id="final-rank">-</span>
                        <span class="stat-label">Rango</span>
                    </div>
                </div>
                <div class="achievements" id="achievements-list"></div>
                <div class="knowledge-summary">
                    <h3>üìö Conocimientos Adquiridos:</h3>
                    <ul id="learning-points"></ul>
                </div>
                <div class="victory-actions">
                    <button id="retry-btn" class="secondary-btn">
                        <i class="fas fa-redo"></i> Reintentar Nivel
                    </button>
                    <button id="menu-btn" class="primary-btn">
                        <i class="fas fa-home"></i> Men√∫ Principal
                    </button>
                </div>
            </div>
        </section>

    </main>

    <!-- Scripts -->
    <script src="js/levels/colon-cancer-data.js"></script>
    <script src="js/levels/colon-cancer-game.js"></script>
</body>
</html>
